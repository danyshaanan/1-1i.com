<html lang=en>
<head><style>body { margin: 0; overflow: hidden; }</style></head>
<body>

<script src='controls.js'></script>
<script src='canvas.js'></script>
<script src='color.js'></script>
<script src='math.js'></script>

<script>
'use strict'

////////////////////////////////////////////////////////////////////////////////

let def = { cA: -3, cB: -1.5, zoom: 1/256, i: 80, generator: 0, jA: -0.82, jB: -0.2 }

const generators = [, math.mandelbrot]

let generator

const getColor = (x, y) => {
  const i = generator([x * def.zoom + def.cA, y * def.zoom + def.cB], def.i)

  if (i === Infinity) return { r: 0, g: 0, b: 0 }
  return color.hsvToRgb((i/240)%1, 1, Math.min(1, (def.i - i)/60))
}

const canvas = Canvas()
const draw = _ => {
  generators[0] = math.julia([def.jA, def.jB])
  generator = generators[def.generator % generators.length]
  canvas.drawPixels(getColor)
}

;(window.onresize = _ => (canvas.init(), draw()))()
controls.keyboard(def, draw)
controls.mouse(def, canvas, draw)

////////////////////////////////////////////////////////////////////////////////


</script>

</body>
</html>
